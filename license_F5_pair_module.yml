---
#
#      Copyright (c) 2016 F5 Networks
#      All rights reserved.
#
#      author: Mark Lowcher F5 Networks
#      description: This playbook will license two f5 devices. Be sure to change the --basekey to your basekeys!!
#      Also make sure your bigips are in /etc/ansible/hosts.
#      Example: 
#      [bigip]
#      10.0.0.100
#      10.0.0.101

  - hosts: localhost
    connection: local
    gather_facts: no
    vars:
     bigip1: 10.0.0.162
     bigip2: 10.0.0.163
     username: admin
     password: admin

    tasks:

    - name: License Big-IP 1
      bigip_command:
       server: "{{bigip1}}"
       user: "{{username}}"
       password: "{{password}}"
       commands: run /util bash /usr/local/bin/SOAPLicenseClient --interactive  --basekey VBTDD-VYLLL-JZFEM-WUVQY-SKKZZAF
       validate_certs: "no"
      delegate_to: localhost

    - name: License Big-IP 2
      bigip_command:
       server: "{{bigip2}}"
       user: "{{username}}"
       password: "{{password}}"
       commands: run /util bash /usr/local/bin/SOAPLicenseClient --interactive  --basekey UIKGF-YOYBU-UKNEY-BLSQJ-GBGIEVU
       validate_certs: "no"
      delegate_to: localhost



# Back up licenses
# TXXRI-JKBDW-HKDSF-JNVBY-VFRERUN
